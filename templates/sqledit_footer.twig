<script type="text/javascript">
jQuery(document).ready(function() {
    document.forms[0].query.focus();
    CodeMirror.commands.sendQuery = function() {
        console.log('SEND QUERY');
        jQuery('#sqlform').submit();
    };
    window.editor = CodeMirror.fromTextArea($('#query')[0], {
        mode: 'text/x-sql',
        indentWithTabs: true,
        smartIndent: true,
        lineNumbers: true,
        matchBrackets: true,
        autofocus: true,
        extraKeys: {
            "Ctrl-Space": "autocomplete",
            "Ctrl-Enter": "sendQuery"
        },
        foldGutter: true,
        gutters: ["CodeMirror-linenumbers", "CodeMirror-foldgutter"]
    });
    jQuery('table.tabs').prependTo('body');
    jQuery('table.printconnection').prependTo('.sqlform');
    if (window.parent.frames.length > 1) {
        $('#csstheme', window.parent.frames[0].document).attr('href', '/src/themes/default/global.css');
    }
    jQuery('.CodeMirror').focus().css('height', $('#query').attr('rows') * 30).resizable();
});
</script>

</body>

</html>
