<!DOCTYPE html>
<html xml:lang="{{applocale}}" lang="{{applocale}}" isolang="{{isolang}}" {{dir}}>

    <head isolang="{{isolang}}" {{dir}}>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <link rel="stylesheet" href="{{subfolder}}/src/themes/{{theme}}/global.css" type="text/css" id="csstheme" />
        <link rel="stylesheet/less" href="{{subfolder}}/src/themes/global.less" type="text/css" id="csstheme" />
        <link rel="shortcut icon" href="{{subfolder}}/images/themes/{{theme}}/Favicon.ico" type="image/vnd.microsoft.icon" />
        <link rel="icon" type="image/png" href="{{subfolder}}/images/themes/{{theme}}/Introduction.png" />
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
        <script src="{{subfolder}}/js/less.min.js" type="text/javascript"></script>

        <title data-headertemplate="{{headertemplate}}">{{appName}}</title>

        <script type="text/javascript">
        $(document).ready(function () {
            if (window.parent.frames.length > 1) {
                $('#csstheme', window.parent.frames[0].document).attr('href', '{{subfolder}}/src/themes/{{theme}}/global.css');
            }
        });
        if (window.parent.frames.length === 0) {
            var redirect_to, subject = location.pathname.replace('{{subfolder}}/src/views/', '').replace('.php', '');
            if (subject === '{{subfolder}}/redirect/server') {
                subject = '/server';
                redirect_to = '{{subfolder}}' + subject + location.search
                console.log('location subject', subject, 'redirect_to', redirect_to);;
            } else {
                redirect_to = '{{subfolder}}/' + subject + location.search
                var redirection_msg = 'location subject ' + subject + ' redirect_to ' + redirect_to;
                alert(redirection_msg);
                console.log(redirection_msg);
                location.href = redirect_to;
            }
        }
        </script>