<!DOCTYPE html>
<html lang="en">

    <head>
        <meta charset="UTF-8">
        <title>jstree basic demos</title>
        <style>
        html {
            margin: 0;
            padding: 0;
            font-size: 62.5%;
        }

        body {
            max-width: 800px;
            min-width: 300px;
            margin: 0 auto;
            padding: 20px 10px;
            font-size: 14px;
            font-size: 1.4em;
        }

        h1 {
            font-size: 1.8em;
        }

        .demo {
            overflow: auto;
            border: 1px solid silver;
            min-height: 100px;
        }
        </style>
        <link rel="stylesheet" href="/js/jstree/themes/default/style.min.css" />
    </head>

    <body>

        <h1>Lazy loading demo</h1>
        <div id="lazy" class="demo"></div>
        <script src="//ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
        <script src="/js/jstree/jstree.min.js"></script>
        <script>
        var level = 'servers';
        $('#lazy').jstree({
            "state": {
                "key": "jstree"
            },
            "plugins": ["wholerow", "state"],
            'core': {
                'data': {
                    "url": function (node) {
                        console.log('url node', node);
                        if (node.id === '#') {
                            return 'https://phppga.civicbrain.io/src/views/servers?action=tree&json=true';
                        } else {
                            return node.original.url + '&json=true';
                        }
                    },
                    "data": function (node) {
                        if (node.id === '#') {
                            return;
                        }
                        return function (node1) {
                            console.log('node data', node1);
                            return node.original;
                        };
                    }
                }
            }
        });
        </script>
    </body>

</html>