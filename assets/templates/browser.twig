<!DOCTYPE html>
<html xml:lang="{{lang.applocale}}" lang="{{lang.applocale}}" dir="{{lang.applangdir}}">

    <head data-headertemplate="{{headertemplate}}">
        <link rel="stylesheet" href="{{subfolder}}/assets/js/jstree/themes/phppgadmin/style.css" /> {% include 'components/common_head.twig' %}

        <script src="{{subfolder}}/assets/js/jstree/jstree.min.js"></script>
        <style type="text/css">
        .refreshTree {
            position: absolute;
            right: 0;
            z-index: 1000;
        }
        </style>
    </head>

    <body class="browser">

        <div dir="{{lang.applangdir}}">

            <div class="logo">
                <a href="{{subfolder}}/" target="_parent">{{appName}}</a>
            </div>
            <div class="refreshTree">
                <a href="{{subfolder}}/src/views/browser" target="browser">
                        <img src="{{icon.Refresh}}" alt="{{lang.strrefresh}}" title="{{lang.strrefresh}}" />
                    </a>
            </div>

            <div id="lazy" class="demo"></div>

        </div>

        <script>
        $('#lazy').jstree({
            "state": {
                "key": "jstree"
            },
            "plugins": ["state"],
            'core': {
                'data': {
                    "url": function (node) {
                        if (node.id === '#') {
                            return '{{subfolder}}/src/views/browser?action=tree';
                        } else {
                            return node.original.url;
                        }
                    }
                }
            }
        });
        

        $('#lazy').on("activate_node.jstree", function (e, data) {
            if (window.parent.frames.detail) {
                window.parent.frames.detail.location.replace(data.node.a_attr.href);
            }
        });
        $('#lazy').on("loaded.jstree", function (e, data) {
            $('#lazy').data('jstree').show_dots();
        });
        </script>

    </body>

</html>